<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AnonMarket Shop</title>
<style>
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#8b0000;color:#fff;overflow:hidden;position:relative;}
header{display:flex;justify-content:space-between;align-items:center;padding:15px;position:relative;z-index:10;}
header img{height:40px}
.container{padding:20px;position:relative;z-index:10;}
.card{background:#b00000;padding:15px;border-radius:12px;margin-bottom:15px;box-shadow:0 4px 8px rgba(0,0,0,0.3);position:relative;z-index:10;}
button{padding:12px;width:100%;background:#ff2222;color:#fff;border:none;border-radius:10px;font-size:16px;cursor:pointer;transition:0.2s;}
button:disabled{background:#555;}
button:hover:not(:disabled){background:#ff4444;}
input,select{width:100%;padding:10px;margin:8px 0;border-radius:6px;border:none;}
small{opacity:.8;}
#success-page{display:none;flex-direction:column;justify-content:center;align-items:center;height:100vh;text-align:center;padding:20px;position:relative;z-index:10;}
#success-page img{width:90px;margin-bottom:20px;}
#success-page .card{background:#b00000;padding:20px;border-radius:15px;max-width:400px;width:100%;position:relative;z-index:10;}
.box{position:absolute;width:40px;height:40px;background:rgba(255,0,0,0.2);border-radius:8px;pointer-events:none;transition:transform 0.1s linear;z-index:1;}
</style>
</head>
<body>

<header>
  <img src="https://files.catbox.moe/3xstci.png">
  <b>AnonMarket Shop</b>
</header>

<div class="container" id="shop-page">

  <!-- SEWA BOT -->
  <div class="card">
    <h3>Sewa Bot Jaga Grup WhatsApp (1 Bulan)</h3>
    <p>Price: <b>6.000</b></p>
    <button disabled onclick="alert('System: Produk Sedang Maintenance')">Maintenance</button>
  </div>

  <!-- PANEL -->
  <div class="card">
    <h3>Panel Ptredoctly</h3>
    <input id="username" placeholder="Masukan Username Panel">
    <select id="ram"></select>
    <button onclick="beliPanel()">Beli</button>
    <small>Akun dibuat otomatis setelah pembayaran</small>
  </div>

  <!-- NOKOS -->
  <div class="card">
    <h3>NOKOSBRAZIL</h3>
    <p>Price: <b>30.000</b></p>
    <button onclick="beliNokos()">Beli</button>
  </div>

</div>

<!-- SUCCESS PAGE -->
<div id="success-page">
  <div class="card">
    <img src="https://files.catbox.moe/3xstci.png">
    <h2>‚úÖ Pembayaran Berhasil</h2>
    <p>Terima kasih üôè<br>Sistem sedang memproses akun Anda.</p>
    <div id="info-akun"></div>
    <button onclick="backShop()">Kembali ke Shop</button>
  </div>
</div>

<script>
// ======= Animasi Kotak Bergerak =======
const boxCount=15;
for(let i=0;i<boxCount;i++){
  const box=document.createElement("div");
  box.className="box";
  box.style.left=Math.random()*window.innerWidth+"px";
  box.style.top=Math.random()*window.innerHeight+"px";
  document.body.appendChild(box);
}
let mouseX=0, mouseY=0;
document.addEventListener("mousemove",e=>{mouseX=e.clientX; mouseY=e.clientY;});
document.addEventListener("touchmove",e=>{mouseX=e.touches[0].clientX; mouseY=e.touches[0].clientY;});
function animate(){
  document.querySelectorAll(".box").forEach(box=>{
    const rect=box.getBoundingClientRect();
    const dx=(mouseX-rect.left)*0.05;
    const dy=(mouseY-rect.top)*0.05;
    box.style.transform=`translate(${dx}px,${dy}px)`;
  });
  requestAnimationFrame(animate);
}
animate();

// ======= 1GB GRATIS LOGIC =======
const ramSelect = document.getElementById("ram");
function updateRamOptions() {
  const soldKey = "ram_1gb_sold";
  const sold = localStorage.getItem(soldKey);

  ramSelect.innerHTML = `
    <option value="1">${sold ? "1GB - 1.000" : "1GB - GRATIS (cepat!)"}</option>
    <option value="2">2GB - 2.000</option>
    <option value="3">3GB - 3.000</option>
    <option value="4">4GB - 4.000</option>
    <option value="5">5GB - 5.000</option>
    <option value="6">6GB - 6.000</option>
    <option value="7">7GB - 7.000</option>
    <option value="8">8GB - 8.000</option>
    <option value="9">9GB - 9.000</option>
    <option value="unlimited">UNLIMITED - PROMO</option>
  `;
}
updateRamOptions();

// ======= Beli Panel =======
function beliPanel(){
  const u = document.getElementById("username").value;
  const r = ramSelect.value;
  if(!u) return alert("Username wajib diisi");

  // cek 1GB GRATIS
  if(r==="1" && !localStorage.getItem("ram_1gb_sold")){
    alert("Selamat! Anda mendapatkan 1GB GRATIS üéâ");
    localStorage.setItem("ram_1gb_sold", "true"); // tandai sudah dibeli
  }

  // tentukan harga
  let price;
  if(r==="1" && localStorage.getItem("ram_1gb_sold")==="true") price = 1000;
  else if(r==="1") price = 0;
  else if(r==="unlimited") price = 5000;
  else price = Number(r)*1000;

  // simpan localStorage untuk success page
  localStorage.setItem("panel_order", JSON.stringify({username:u, ram:r}));

  // redirect ke Pakasir
  const order_id = "PANEL-" + Date.now();
  const url = `https://app.pakasir.com/pay/panel-ptredoctly/${price}?order_id=${order_id}`;
  window.location.href = url;
}

// ======= Beli NOKOS =======
function beliNokos(){
  const order_id = "NOKOS-BRAZIL-" + Date.now();
  localStorage.setItem("panel_order", JSON.stringify({username:"N/A", ram:"N/A"}));
  const url = `https://app.pakasir.com/pay/nokosbrazil/30000?order_id=${order_id}`;
  window.location.href = url;
}

// ======= BACK TO SHOP =======
function backShop(){
  document.getElementById("shop-page").style.display="block";
  document.getElementById("success-page").style.display="none";
}

// ======= HANDLE SUCCESS PAGE =======
const params = new URLSearchParams(window.location.search);
if(params.get("status")==="success"){
  document.getElementById("shop-page").style.display="none";
  document.getElementById("success-page").style.display="flex";
  const panel = JSON.parse(localStorage.getItem("panel_order"));
  if(panel){
    document.getElementById("info-akun").innerHTML = `<p><b>Username:</b> ${panel.username}<br><b>RAM:</b> ${panel.ram}</p>`;
    localStorage.removeItem("panel_order");
  }
}
</script>

</body>
</html>
